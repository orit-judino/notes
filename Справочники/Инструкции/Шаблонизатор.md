## Шаблонизатор — краткие правила

### Подстановка значений
{{ключ}}
- Берётся из контекста данных
- Нет значения → пустая строка
- Массив → по умолчанию join через ", "

### Условные блоки
{{#ключ}} текст {{/ключ}}
- Строка: не пустая
- Массив: не пустой
- Boolean: true
- Число: ≠ 0

### Фильтры
{{ключ|фильтр1|фильтр2}}

Доступные фильтры:
- cap — первая буква заглавная
- upper / lower — регистр
- trim — обрезка пробелов
- date — YYYY-MM-DD → DD.MM.YYYY

### Работа с массивами
Параметризованный фильтр join:
{{ключ|join:", "}}
{{ключ|join:"; "}}

Пример:
{{осложнения|join:", "|cap}}

### Рекомендуемый паттерн для осложнений
Данные храним как массив:
{{#осложнения}} {{осложнения|join:", "|cap}}{{/осложнения}}

### Пунктуация
- Точки и запятые ставятся в шаблоне
- Условные запятые — внутри {{#...}}
- Даты не ломаются (23.12.2025)
- Лишние пробелы нормализуются автоматически

### Пример шаблона
Последствия внутричерепного кровоизлияния от {{дата|date}} в {{сторона}} {{бассейн}}.{{#осложнения}} {{осложнения|join:", "|cap}}{{/осложнения}}

### Принцип
Логика — в коде  
Шаблон — только форма текста
